

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Part 3 - Organizing your Project / UI and Simple Templating &mdash; Recipe Website Tutorial 1.0 documentation</title>
    
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="Recipe Website Tutorial 1.0 documentation" href="../index.html" />
    <link rel="next" title="Part 4 - Deploying your Application" href="deploying-your-application.html" />
    <link rel="prev" title="Part 2 - Setting up your development environment" href="setting-up-dev-environment.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="deploying-your-application.html" title="Part 4 - Deploying your Application"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="setting-up-dev-environment.html" title="Part 2 - Setting up your development environment"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">Recipe Website Tutorial 1.0 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="part-3-organizing-your-project-ui-and-simple-templating">
<span id="organizing-project-chapter"></span><span id="index-0"></span><h1>Part 3 - Organizing your Project / UI and Simple Templating<a class="headerlink" href="#part-3-organizing-your-project-ui-and-simple-templating" title="Permalink to this headline">¶</a></h1>
<p>At this point we have covered the following</p>
<dl class="docutils">
<dt><a class="reference internal" href="planning-and-mockups.html#planning-mockups-chapter"><em>Part 1 - Planning and Mockups</em></a></dt>
<dd>Where we looked at process of planning the user interface (UI) of your application</dd>
<dt><a class="reference internal" href="setting-up-dev-environment.html#setting-up-dev-chapter"><em>Part 2 - Setting up your development environment</em></a></dt>
<dd>This looked at what we needed on our computer to get started.
We also gained some experience with the framework by creating a simple application.</dd>
</dl>
<p>You should be able to create a simple web application now.</p>
<div class="section" id="setting-up-the-bottle-starter-scaffold">
<h2>Setting up the Bottle Starter Scaffold<a class="headerlink" href="#setting-up-the-bottle-starter-scaffold" title="Permalink to this headline">¶</a></h2>
<p>A scaffold refers to a predetermined structure around which you will build your applications.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><strong>Why Scaffolds?</strong> Glad you asked! Over the next couple weeks you will be submitting work to be assessed, to simplify things
We&#8217;ve developed a standard way of organizing your projects. Maintaining a standard approach means there is one less decision to make when building your applications.</p>
</div>
<p>There are two scaffolds to be used in this course the names are listed below:</p>
<dl class="docutils">
<dt><strong>Starter Scaffold</strong></dt>
<dd>This is a simple approach, just enough folders to keep things organized</dd>
<dt><strong>GAE Scaffold</strong></dt>
<dd>This arrangement is meant to accomodate projects that will be deployed to Google App Engine, it will seem to be lots of folders, most of them play a supporting role, but all are useful.</dd>
</dl>
<p>Today we will focus on the <tt class="docutils literal"><span class="pre">Starter</span> <span class="pre">Scaffold</span></tt>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This section assumes that you have Virtualenv installed. You may find it helpful to
review the section entitled <a class="reference internal" href="setting-up-dev-environment.html#virtualenv-section"><em>Using Bootstrapbot.py to setup a Virtualenv</em></a></p>
</div>
<p>You will need to download the Bottle Starter Scaffold <a class="reference external" href="http://dl.dropbox.com/u/1004432/bottle_starter.zip">http://dl.dropbox.com/u/1004432/bottle_starter.zip</a>
It is best to place it in the same folder where you have your <cite>venv</cite> folder.</p>
<p>Activate your virtual environment (we&#8217;re assuming that you already installed Bottle):</p>
<div class="highlight-python"><pre>source venv/bin/activate</pre>
</div>
<p>Download and unzip the starter scaffold <a class="reference external" href="http://dl.dropbox.com/u/1004432/bottle_starter.zip">http://dl.dropbox.com/u/1004432/bottle_starter.zip</a>:</p>
<p>The unzipped directory structure looks something like this (for the sake of simplicity, only the key files and folders are listed below):</p>
<div class="highlight-python"><pre>bottle_starter
├── app.py
├── static
│   ├── css
│   ├── images
│   └── js
└── templates
    └── index.tpl</pre>
</div>
<p>Check to see that the scaffold is working by running the following:</p>
<p>The instructions below are for Unix, but
similar steps can be taken on Windows.</p>
<ol class="arabic">
<li><p class="first">Copy <cite>bottle_starter</cite> to <cite>MyApp</cite>:</p>
<div class="highlight-python"><pre>cp -r bottle_starter MyApp</pre>
</div>
</li>
<li><p class="first">Activate your Python virtual environment (if you haven&#8217;t done so already):</p>
<div class="highlight-python"><pre>source venv/bin/activate</pre>
</div>
</li>
<li><p class="first">Test that it is working by running launching the app:</p>
<div class="highlight-python"><pre>cd MyApp
python app.py</pre>
</div>
</li>
</ol>
<p>Visit your browser at <a class="reference external" href="http://localhost:6543">http://localhost:6543</a>, you should see something like the
image below:</p>
<img alt="../_images/scaffoldview.png" src="../_images/scaffoldview.png" />
<p>If you are on a network with a proxy then pay careful attention to the next section.</p>
</div>
<div class="section" id="dealing-with-on-campus-proxies">
<span id="campus-proxies"></span><h2>Dealing with on campus proxies<a class="headerlink" href="#dealing-with-on-campus-proxies" title="Permalink to this headline">¶</a></h2>
<p>locations that use a proxy on their network.</p>
<dl class="docutils">
<dt><strong>Known UWI proxies</strong></dt>
<dd>scalpel, proxy-cluster, proxy1, proxy3, sword
while we use <cite>scalpel</cite> in our examples
any of the ones listed should work</dd>
</dl>
<ul class="simple">
<li>All proxies are configured to run on port 8080.</li>
</ul>
<p>After launching the terminal (or commandline) it is important to set the http_proxy
environmental variable, BEFORE running any other command</p>
<p><strong>On Unix</strong></p>
<div class="highlight-python"><pre>export http_proxy=proxy3:8080</pre>
</div>
<p><strong>On Windows</strong></p>
<p>the same can be acheived by using <cite>set</cite> instead of <cite>export</cite>:</p>
<div class="highlight-python"><pre>set http_proxy=proxy3:8080</pre>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">For persons using <cite>sudo</cite> on Unix. Be careful if you use <cite>sudo</cite> on Unix, <cite>sudo</cite> may not inherit the http_proxy environment variable if you set it without <cite>sudo</cite>.</p>
</div>
</div>
<div class="section" id="creating-the-views-for-our-recipewebsite-application">
<h2>Creating the views for our RecipeWebsite application<a class="headerlink" href="#creating-the-views-for-our-recipewebsite-application" title="Permalink to this headline">¶</a></h2>
<p>Based on the nature of our application we can predict some of views
that we will need.</p>
<p>The names below represent reasonable descriptive choices for our Views:</p>
<dl class="docutils">
<dt>welcome</dt>
<dd>a view which shows a welcome or home page, it is associated with the root of the website.</dd>
<dt>recipe</dt>
<dd>when viewing an individual recipe, this view will be used to display all the information for that recipe.</dd>
<dt>ingredient</dt>
<dd>search by ingredient, this view will return a list of recipes that have the particular ingredient.</dd>
<dt>submitrecipe</dt>
<dd>It should be possible to add a new recipe using the &#8216;submit a recipe&#8217; link.</dd>
<dt>registration</dt>
<dd>There needs to be a registration page, so that new users can sign up</dd>
<dt>faq</dt>
<dd>This will be a simple view that lists common questions about the web application</dd>
</dl>
<p>Bottle does not provide a standard way to manage our code, so we will rely on our <a class="reference external" href="http://dl.dropbox.com/u/1004432/bottle_starter.zip">bottle starter scaffold</a> to ensure that our applications have a standard and predictable folder structure.</p>
<p>Our application will have the following sections</p>
<p>You can download our <a href="#id1"><span class="problematic" id="id2">`bottle starter app`_</span></a> to get going.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">the term &#8220;scaffold&#8221; comes from the construction industry and roughly means &#8220;structure&#8221;.</p>
</div>
<p>Copy the bottle_starter folder to RecipeWebsite:</p>
<div class="highlight-python"><pre>cp -r bottle_starter RecipeWebsite</pre>
</div>
<p>Enter the <cite>RecipeWebsite</cite> folder</p>
<p>The</p>
</div>
<div class="section" id="adding-a-template-in-the-templates-folder">
<h2>Adding a template in the <cite>templates</cite> folder<a class="headerlink" href="#adding-a-template-in-the-templates-folder" title="Permalink to this headline">¶</a></h2>
<p>In the <cite>templates</cite> folder we will add a new template called <cite>recipe.pt</cite>. To make it very
simple we will just put the phrase, &#8220;I am the recipe template&#8221;.</p>
<div class="highlight-python"><pre>&lt;h1&gt;I am the recipe template&lt;/h1&gt;</pre>
</div>
</div>
<div class="section" id="view-the-new-view-in-your-browser">
<h2>View the new view in your browser<a class="headerlink" href="#view-the-new-view-in-your-browser" title="Permalink to this headline">¶</a></h2>
<p>Start the application:</p>
<div class="highlight-python"><pre>pserve development.ini</pre>
</div>
<p>Then visit localhost:6543/recipe_view, you should see something like the image below.</p>
<blockquote>
<div><img alt="../_images/recipetemplate.jpg" src="../_images/recipetemplate.jpg" />
</div></blockquote>
</div>
<div class="section" id="passing-variables-to-the-template">
<h2>Passing variables to the template<a class="headerlink" href="#passing-variables-to-the-template" title="Permalink to this headline">¶</a></h2>
<p>Variables are generally passed to Chameleon templates as key value pairs of a python dictionary.
Notice how this approach is used to define the &#8216;project&#8217; in the root template <cite>my_view</cite>.</p>
<div class="highlight-python"><pre>@view_config(context=RecipeSite, renderer='templates/welcome.pt')
        def my_view(request):
            return {'project':'RecipeWebsite'}</pre>
</div>
</div>
<div class="section" id="defining-macros-and-slots-creating-a-master-template">
<h2>Defining macros and slots, creating a master template<a class="headerlink" href="#defining-macros-and-slots-creating-a-master-template" title="Permalink to this headline">¶</a></h2>
<p>After a while we begin to see things that are common to all templates. Instead of repeating these elements
across different templates, we can share these elements by creating a global or master template.
New templates can be made to inherit from the master template.
In our case the <cite>welcome.pt</cite> template is a good starting point.</p>
<p>Based on our mockups, most pages will be simpler than the front page so we will create a more generic template
based on the <cite>welcome.pt</cite> template.</p>
<img alt="../_images/recipewebsite-template-innerpage.png" src="../_images/recipewebsite-template-innerpage.png" />
<p>We&#8217;ll create a new master template called &#8216;global.pt&#8217; in the <cite>templates</cite> folder. We can use the <cite>welcome.pt</cite> template as the starting point.</p>
<p>The simpler global template can be implemented with 3 rows instead of 5 in the welcome template.</p>
<img alt="../_images/simpletemplate.jpg" src="../_images/simpletemplate.jpg" />
<p>Pay attention to the following changes:</p>
<ul class="simple">
<li>the addition of a <cite>metal:define-macro</cite> line</li>
<li>the addition of a <cite>define-slot</cite> which will act as a replaceable region.</li>
<li>in general this template is more generic</li>
</ul>
<p>We name our template <cite>global.pt</cite>:</p>
<div class="highlight-python"><pre>&lt;!DOCTYPE html&gt;
&lt;html
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      metal:define-macro="layout"&gt;
&lt;head&gt;
&lt;head&gt;
     &lt;style&gt;
        &lt;!--
        @import url(http://dl.dropbox.com/u/1004432/decogrids-12-gapless.css);
        --&gt;
      &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;

     &lt;div id="row-1" class="row"&gt;
           &lt;div class ="cell position-0 width-3"&gt;
               LOGO will go here
           &lt;/div&gt;</pre>
</div>
</div>
<div class="section" id="discussion">
<h2>Discussion<a class="headerlink" href="#discussion" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>What is the benefit have a standard directory structure?</li>
<li>We used pip to install the Bottle package, in python circles packages are often called <cite>eggs</cite>, can you guess why?</li>
<li>In what way do conventions make source code more maintainable?</li>
<li>Any thoughts on what happens when you use virtualenv and the <cite>source bin/activate</cite> command?</li>
<li>What do you think happens when you set the <cite>http_proxy</cite> environment variable.?</li>
</ul>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Part 3 - Organizing your Project / UI and Simple Templating</a><ul>
<li><a class="reference internal" href="#setting-up-the-bottle-starter-scaffold">Setting up the Bottle Starter Scaffold</a></li>
<li><a class="reference internal" href="#dealing-with-on-campus-proxies">Dealing with on campus proxies</a></li>
<li><a class="reference internal" href="#creating-the-views-for-our-recipewebsite-application">Creating the views for our RecipeWebsite application</a></li>
<li><a class="reference internal" href="#adding-a-template-in-the-templates-folder">Adding a template in the <cite>templates</cite> folder</a></li>
<li><a class="reference internal" href="#view-the-new-view-in-your-browser">View the new view in your browser</a></li>
<li><a class="reference internal" href="#passing-variables-to-the-template">Passing variables to the template</a></li>
<li><a class="reference internal" href="#defining-macros-and-slots-creating-a-master-template">Defining macros and slots, creating a master template</a></li>
<li><a class="reference internal" href="#discussion">Discussion</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="setting-up-dev-environment.html"
                        title="previous chapter">Part 2 - Setting up your development environment</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="deploying-your-application.html"
                        title="next chapter">Part 4 - Deploying your Application</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/tutorials/organizing-your-project.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="deploying-your-application.html" title="Part 4 - Deploying your Application"
             >next</a> |</li>
        <li class="right" >
          <a href="setting-up-dev-environment.html" title="Part 2 - Setting up your development environment"
             >previous</a> |</li>
        <li><a href="../index.html">Recipe Website Tutorial 1.0 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2012, David Bain.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.2.
    </div>
  </body>
</html>